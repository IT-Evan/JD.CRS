(function(){$(function(){function r(){location.reload(!0)}function f(n,t){abp.message.confirm(abp.utils.formatString(abp.localization.localize("AreYouSureWantToDelete","CRS"),t),function(t){t&&i.delete({id:n}).done(function(){r()})})}var i=abp.services.app.user,n=$("#UserCreateModal"),t=n.find("form"),u=$("#dataTable");$.fn.dataTable.ext.buttons.alert={className:"buttons-alert",action:function(){n.modal("show")}};$(document).ready(function(){u.DataTable({aLengthMenu:[[10,25,50,-1],[10,25,50,"全部"]],pagingType:"full_numbers",scrollY:470,dom:"<'row'<'col-sm-8'B><'col-sm-4'lf>><'row'<'col-sm-12'tr>><'row'<'col-sm-6'i><'col-sm-6'p>>",buttons:[{extend:"alert",text:"+"},{extend:"copy",text:"Copy"},{extend:"csv",text:"CSV",bom:!0},{extend:"excel",text:"Excel"},{extend:"pdf",text:"PDF"},{extend:"print",text:"Print"}],oLanguage:{sEmptyTable:"无数据",sInfo:"显示第 _START_ 至 _END_ 项记录，共 _TOTAL_ 项",sInfoEmpty:"显示第 0 至 0 项记录 / 共 0 项",sInfoFiltered:"(从 _MAX_ 条记录过滤)",sInfoPostFix:"",sThousands:",",sLengthMenu:"_MENU_ 项/页",sLoadingRecords:"载入中...",sProcessing:"处理中...",sSearch:'<i class="material-icons">search<\/i>',sZeroRecords:"没找到匹配的记录",oPaginate:{sFirst:"|<",sPrevious:"<",sNext:">",sLast:">|"},oAria:{sSortAscending:": 升序排序",sSortDescending:": 降序排序"}}})});t.validate({rules:{Password:"required",ConfirmPassword:{equalTo:"#Password"}}});$("#RefreshButton").click(function(){r()});$(".delete-user").click(function(){var n=$(this).attr("data-user-id"),t=$(this).attr("data-user-name");f(n,t)});$(".edit-user").click(function(n){var t=$(this).attr("data-user-id");n.preventDefault();$.ajax({url:abp.appPath+"Users/EditUserModal?userId="+t,type:"POST",contentType:"application/html",success:function(n){$("#UserEditModal div.modal-content").html(n)},error:function(){}})});t.find('button[type="submit"]').click(function(r){var u,f,e,o;if(r.preventDefault(),t.valid()){if(u=t.serializeFormToObject(),u.roleNames=[],f=$("input[name='role']:checked"),f)for(e=0;e<f.length;e++)o=$(f[e]),u.roleNames.push(o.val());abp.ui.setBusy(n);i.create(u).done(function(){n.modal("hide");location.reload(!0)}).always(function(){abp.ui.clearBusy(n)})}});n.on("shown.bs.modal",function(){n.find("input:not([type=hidden]):first").focus()})})})();